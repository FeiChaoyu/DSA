二叉堆：

二叉堆是一棵完全二叉树

完全二叉树是指最后一层的结点都连续集中在最左边，右边有可能是空

二叉堆是一棵平衡二叉树

二叉堆的性质：

堆中某个节点的值总是小于等于其父节点的值（最大堆）

数组存储二叉堆
![lUE40J.png](https://s2.ax1x.com/2020/01/03/lUE40J.png)

![lUZVxK.png](https://s2.ax1x.com/2020/01/03/lUZVxK.png)

将数组转换成堆的过程叫做 Heapify

将n个元素逐个插入到一个空堆中，算法复杂度是O(nlogn)

Heapify的过程，算法复杂度为O(n)


-----------------
堆排序解决TOPK问题

对于TOPK问题，解决方法有很多：

1. 对源数据中所有数据进行排序，取出前K个数据，就是TopK。但是当数据量很大时，只需要k个最大的数，整体排序很耗时，效率不高。

2. 维护一个K长度的数组a[]，先读取源数据中的前K个放入数组，对该数组进行升序排序，再依次读取源数据第K个以后的数据，和数组中最小的元素（a[0]）比较，如果小于a[0]直接pass，大于的话，就丢弃最小的元素a[0]，利用二分法找到其位置，然后该位置前的数组元素整体向前移位，直到源数据读取结束。这比方法一效率会有很大的提高，但是当K的值较大的时候，长度为K的数据整体移位，也是非常耗时的。

3. 使用最小堆。


最大索引堆
![1nHzDA.png](https://s2.ax1x.com/2020/01/27/1nHzDA.png)

索引堆优化
![1u3mLT.png](https://s2.ax1x.com/2020/01/27/1u3mLT.png)

![1u3KwF.png](https://s2.ax1x.com/2020/01/27/1u3KwF.png)
